<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Historical maps Geolocator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <%= javascript_include_tag "https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js", "https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js" %>
  <![endif]-->

  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
  <link href="/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
</head>
<body>
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <%= link_to "HMaGe", "/", :class => "navbar-brand" %>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <% if user_signed_in? %>
            <li>
              <%= link_to root_path do %>
                <i class="glyphicon glyphicon-home"></i> &nbsp;Home
              <% end %>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <i class="glyphicon glyphicon-user"></i> &nbsp;
                <%= current_user.email %> <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" role="menu">
                <% if can? :manager, User %>
                  <li>
                    <%= link_to list_admin_users_path do %>
                      <i class="glyphicon glyphicon-check"></i> &nbsp; Manager Users
                    <% end %>
                  </li>
                  <li class="divider"></li>
                <% end %>
                <li>
                  <%= link_to edit_user_registration_path do %>
                    <i class="glyphicon glyphicon-edit"></i> &nbsp; Change Password
                  <% end %>
                </li>
                <li class="divider"></li>
                <li>
                  <%= link_to destroy_user_session_path, :method => 'delete' do %>
                    <i class="glyphicon glyphicon-log-out"></i> &nbsp; Signout
                  <% end %>
                </li>
              </ul>
            </li>
          <% else %>
            <li>
              <%= link_to new_user_session_path do %>
                <i class="glyphicon glyphicon-log-in"></i> &nbsp; Signin
              <% end %>
            </li>
          <% end %>
          <li>
            <a href="/about.html">
              <i class="glyphicon glyphicon-info-sign"></i> &nbsp;About
            </a>
          </li>
        </ul>
        <div class="col-sm-6 col-md-6 pull-right">
          <%= form_tag search_maps_path, :class => "navbar-form", :role => "search"  do %>
          <div class="input-group">
            <%= text_field_tag :q, nil, :class => "form-control", :placeholder => "Keresesi parameter", :type => "text" %>
            <div class="input-group-btn">
              <%= button_tag(type: "submit", class: "btn btn-default") do %>
                <i class="glyphicon glyphicon-search"></i> Search
              <% end %>
            </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <% flash.each do |name, msg| %>
      <%= content_tag :div, :class => "alert alert-#{ name == :error ? "danger" : "success" } alert-dismissable" do %>
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <%= msg %>
      <% end %>
    <% end %>

    <%= yield %>
  </div>
</body>
</html>
