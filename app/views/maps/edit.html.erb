<script type="text/javascript">
  $(document).ready(function(){
      $("#<%= @map.id %>").elevateZoom({
        zoomType: "lens",
        lensShape: "round",
        scrollZoom : true,
        responsive:  true,
        loadingIcon: true
      });
      $('.map-wysiwyg').editable({inlineMode: false, height: '300'});
  });
</script>
<div class="row">
  <h1><%=  Map.model_name.human %> <%= t(:extended_attributes, :scope => [:map]) %></h1>
  <hr>
  <!-- left column -->
  <div class="col-md-3">
    <div class="text-center">
      <a href="<%= @map.image.url(:large) %>" data-toggle="lightbox" data-title="<%= @map.image.original_filename %>">
        <img id="<%= @map.id %>" src="<%= @map.image.url(:medium) %>" data-zoom-image="<%= @map.image.url(:large) %>" class="img-responsive img-rounded" />
      </a>
    </div>
    <br>
    <div id="table">
      <table class="table table-striped table-responsive">
      <tbody>
          <tr>
            <td><%= Map.human_attribute_name("name") %></td>
            <td>
            <%= link_to @map.name, map_path(@map.id) %>
            </td>
          </tr>
          <tr>
            <td><%= Map.human_attribute_name("size") %></td>
            <td><%= number_to_human_size(@map.image.size) %></td>
          </tr>
          <tr>
            <td><%= Map.human_attribute_name("original_filename") %></td>
            <td>
              <a href="<%= @map.image.url(:large) %>" data-toggle="lightbox" data-title="<%= @map.image.original_filename %>">
                <%= @map.image.original_filename %>
              </a>
            </td>
          </tr>
          <tr><td><%= Map.human_attribute_name("status") %></td><td><%= status_to_text(@map.processed) %></td></tr>
          <tr><td><%= Map.human_attribute_name("created") %></td><td><%= @map.created_at.strftime("%Y-%B-%e") %></td></tr>
          <tr>
            <td colspan="2">
              <%= link_to location_map_path(@map.id) do %>
                <button type="button" class="btn btn-primary btn-block"><%= t(:set_location, :scope => [:map]) %></button>
              <% end %>
            </td>
          </tr>
      </tbody>
      </table>
    </div>
  </div>

  <!-- edit form column -->
  <div class="col-md-9 personal-info">
    <% if @map.errors.any? %>
      <div class="alert alert-info alert-dismissable">
        <a class="panel-close close" data-dismiss="alert">Ã—</a>
        <i class="fa fa-coffee"></i>
        This is an <strong>.alert</strong>. Use this to show important messages to the user.
      </div>
    <% end %>

    <%= form_for @map, :html => {:class => "form-horizontal", :role => "form"} do |f| %>
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <!-- EXTENDED ATTRIBUTES -->
      <div class="panel panel-primary">
        <div class="panel-heading" role="tab" id="extended-attributes-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#extended-attributes-body" aria-expanded="true" aria-controls="collapseOne">
              <%= t(:extended_attributes, :scope => [:map]) %>
            </a>
          </h4>
        </div>
        <div id="extended-attributes-body" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
          <br>
          <div class="form-group">
            <%= f.label :name, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :name, :class => "form-control", :placeholder => "Name your map", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :kind, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :kind, :class => "form-control", :placeholder => "Kind of map", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :size, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :size, :class => "form-control", :placeholder => "Size of your map", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :resolution, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :resolution, :class => "form-control", :placeholder => "Resolution of your map", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :publisher, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :publisher, :class => "form-control", :placeholder => "Publisher of your map", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :year, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :year, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :projection, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :projection, :class => "form-control", :placeholder => "EPGS:23700", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :creator, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :creator, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :participante, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :participante, :class => "form-control", :type => "text" %>
            </div>
          </div>
        </div>
      </div>
      <!-- ATTRIBUTES -->
      <div class="panel panel-info">
        <div class="panel-heading" role="tab" id="simple-attributes-heading">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#simple-attributes-body" aria-expanded="true" aria-controls="collapseOne">
              <%= t(:additional_attributes, :scope => [:map]) %>
            </a>
          </h4>
        </div>
        <div id="simple-attributes-body" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <br>
          <div class="form-group">
            <%= f.label :section, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :section, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :theme, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :theme, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :gridding, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :gridding, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :language, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :language, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :physical_size, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :physical_size, :class => "form-control", :type => "text" %>
            </div>
          </div>
          <div class="form-group">
            <%= f.label :source, :class => "col-lg-2 control-label" %>
            <div class="col-sm-7">
              <%= f.text_field :source, :class => "form-control", :type => "text" %>
            </div>
          </div>
        </div>
      </div>
      <!-- DESCRIPTION -->
      <div class="panel panel-danger">
        <div class="panel-heading" role="tab" id="map-description-title">
          <h4 class="panel-title">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#map-description-body" aria-expanded="false" aria-controls="collapseTwo">
              <%= t(:description_info, :scope => [:map]) %>
            </a>
          </h4>
        </div>
        <div id="map-description-body" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            <textarea id="map-description-textarea" name="map[description]" class="map-wysiwyg"><%= @map.description %></textarea>
          </div>
        </div>
      </div>
      <!-- REMARKS -->
      <div class="panel panel-warning">
        <div class="panel-heading" role="tab" id="map-remarks-title">
          <h4 class="panel-title">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#map-remarks-body" aria-expanded="false" aria-controls="collapseTwo">
              <%= t(:remarks_info, :scope => [:map]) %>
            </a>
          </h4>
        </div>
        <div id="map-remarks-body" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            <textarea id="map-remarks-textarea" name="map[remarks]" class="map-wysiwyg"><%= @map.remarks %></textarea>
          </div>
        </div>
      </div>
      <!-- DOWNLOADABLE AND PROCESSED -->
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="map-additional-title">
          <h4 class="panel-title">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#map-additional-body" aria-expanded="false" aria-controls="collapseTwo">
              <%= t(:status_info, :scope => [:map]) %>
            </a>
          </h4>
        </div>
        <div id="map-additional-body" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            <br>
            <div class="form-group">
              <div class="col-sm-6">
                <%= f.check_box :downloadable %> <%= f.label :downloadable %>
              </div>
              <div class="col-sm-6">
                <%= f.check_box :processed %> <%= f.label :processed %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <br>
      <div class="form-group">
        <div class="col-sm-6">
          <%= link_to t(:cancel, :scope => [:application]), map_path, :class => "btn btn-primary btn-block" %>
        </div>
        <div class="col-sm-6">
          <%= f.submit t(:save, :scope => [:application]), :class => "btn btn-primary btn-block" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
</div>
